# Telegram Sales Tracker Bot - Setup Guide

## –û–ø–∏—Å–∞–Ω–∏–µ
Telegram-–±–æ—Ç –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ø—Ä–æ–¥–∞–∂ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å Google Sheets. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º –¥–æ–±–∞–≤–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤—ã–ø–ª–∞—Ç—ã.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.10+
- Google Sheets API –¥–æ—Å—Ç—É–ø
- Telegram Bot Token

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
git clone <repository-url>
cd sales-tracker-bot
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ Google Sheets API –∏ Google Drive API
4. –°–æ–∑–¥–∞–π—Ç–µ Service Account –∏ —Å–∫–∞—á–∞–π—Ç–µ credentials.json
5. –ü–æ–º–µ—Å—Ç–∏—Ç–µ credentials.json –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞

### 3. –°–æ–∑–¥–∞–Ω–∏–µ Google Sheets —Ç–∞–±–ª–∏—Ü—ã
–°–æ–∑–¥–∞–π—Ç–µ Google Sheets —Ç–∞–±–ª–∏—Ü—É —Å —Ç—Ä–µ–º—è –ª–∏—Å—Ç–∞–º–∏:

#### –õ–∏—Å—Ç "Workers"
–°—Ç–æ–ª–±—Ü—ã: `tg_id | username | role | clients_count | balance`

#### –õ–∏—Å—Ç "Clients" 
–°—Ç–æ–ª–±—Ü—ã: `worker_tg_id | worker_username | phone | name | messenger | order_link | amount | status | receipt_url | timestamp`

#### –õ–∏—Å—Ç "Withdrawals"
–°—Ç–æ–ª–±—Ü—ã: `id | tg_id | amount | status | created_at`

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ü–æ–ª—É—á–∏—Ç–µ Bot Token
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —Å–≤–æ—é —Ç–∞–±–ª–∏—Ü—É Google Sheets (–ø—Ä–∞–≤–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞)

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `env.example` –≤ `.env`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```bash
cp env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```env
BOT_TOKEN=your_bot_token_here
ADMIN_IDS=123456789,987654321
SPREADSHEET_ID=your_google_spreadsheet_id_here
GSPREAD_CREDENTIALS=credentials.json
REPLY_TIMEOUT=10
```

### 6. –ó–∞–ø—É—Å–∫
```bash
python bot/__main__.py
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤:
1. `/start` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞"
3. –ó–∞–ø—Ä–æ—Å –≤—ã–ø–ª–∞—Ç —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "üí∏ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É"

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
1. `/admin` - –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–ø–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤
3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ –Ω–∞ –≤—ã–ø–ª–∞—Ç—ã
4. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
bot/
‚îú‚îÄ‚îÄ __main__.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ sheets.py            # –†–∞–±–æ—Ç–∞ —Å Google Sheets
‚îú‚îÄ‚îÄ handlers/            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ start.py         # –ö–æ–º–∞–Ω–¥–∞ /start
‚îÇ   ‚îú‚îÄ‚îÄ worker.py        # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ admin.py         # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ commission.py    # –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ receipts.py      # –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–æ–≤
‚îî‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã
    ‚îî‚îÄ‚îÄ validators.py    # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```

## –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–∏—Å—Å–∏–π
- –î–æ 10 –∫–ª–∏–µ–Ω—Ç–æ–≤: 5% –∫–æ–º–∏—Å—Å–∏—è
- –°–≤—ã—à–µ 10 –∫–ª–∏–µ–Ω—Ç–æ–≤: 10% –∫–æ–º–∏—Å—Å–∏—è

## –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∞–π–ª–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –•—Ä–∞–Ω–∏—Ç–µ `credentials.json` –∏ `.env` –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ Google Sheets –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞

## Troubleshooting

### –û—à–∏–±–∫–∏ Google API
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω—ã Google Sheets API –∏ Drive API
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ credentials.json

### –û—à–∏–±–∫–∏ Telegram Bot
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å Bot Token
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –≤ ADMIN_IDS 